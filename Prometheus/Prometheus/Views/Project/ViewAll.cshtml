
@model IEnumerable<Prometheus.Models.ProjectViewModels>

@{
    ViewBag.Title = "Project View All";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var idx = 0;
}


<div class="row">
    <div class="col-lg-2">
        <h2>All Projects</h2>
    </div>
    <div class="col-lg-2">

    </div>
    <div class="col-lg-8"></div>
</div>


<hr />

    <div class="row col-lg-12">
        <div class="col-lg-1">
            <label class="control-label" for="pjfilterlist">Filter:</label>
        </div>
        <div class="col-lg-4">
            @Html.DropDownList("pjfilterlist", null, new { @id = "pjfilterlist", @class = "form-control",@onchange = "ShowProjectDetail()" })
        </div>
        <div class="col-lg-1">
        </div>
        <div class="col-lg-1">
            <button class="btn btn-default" type="button" onclick="LoadProject()">Load Projects</button>
        </div>
        <div class="col-lg-5">
        </div>
        <script type="text/javascript">
            function LoadProject()
            {
                window.location.href = '/Project/LoadProjects';
            }
        </script>
    </div>

    <script type="text/javascript">
        function ShowProjectDetail() {
            if (document.getElementById("pjfilterlist").value && document.getElementById("pjfilterlist").value != 'NONE')
            {
                window.location.href = '/Project/ProjectDetail?ProjectKey=' + document.getElementById("pjfilterlist").value;
            }
        }
    </script>
<hr/>

<div class="panel-group" id="accordion">
    @foreach (var pjtype in ViewBag.pjtypelist)
    {
        if (ViewBag.pjtpdict.ContainsKey(pjtype))
        {
            <div class="panel panel-default" id="panel@(idx)">
                <div class="panel-heading" style="background-color:#0F4FA8;">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-target="#collapse@(idx)" href="#collapse@(idx)" class="collapsed"><font color="white">@pjtype</font></a>
                    </h4>
                </div>

                <div id="collapse@(idx)" class="panel-collapse collapse">
                    <div class="panel-body">

                    @foreach (var item in Model)
                    {
                        if (string.Compare(item.ProjectType, pjtype, true) != 0)
                        { continue; }
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="col-lg-2">

                                        <div class="well"  style="background-color:white;border-left-color:#006DC0;border-top-color:snow;border-right-color:white;border-bottom-color:white;border-top-left-radius:0px;border-bottom-left-radius:0px">
                                            <div class="row text-left">
                                                <a href="/Project/ProjectDetail?ProjectKey=@item.ProjectKey" style="font-size:18px;">@item.ProjectName</a>
                                            </div>

                                            @if (!string.IsNullOrEmpty(item.CurrentNPIProc)
                                                && !string.IsNullOrEmpty(item.PIP1Date)
                                                && !string.IsNullOrEmpty(item.MVTDate))
                                            {
                                                <div class="row text-left">
                                                    <div class="col-lg-1"></div>
                                                    <div class="col-lg-11">
                                                        <a href="/Issue/UpdateIssue?issuekey=@item.CurrentNPIProcKey" style="font-size:14px;">@item.CurrentNPIProc</a>
                                                    </div>
                                                </div>
                                                <div class="row text-left">
                                                    <div class="col-lg-1"></div>
                                                    <div class="col-lg-11" style="font-size:14px;">@item.PIP1Date</div>
                                                </div>
                                                <div class="row text-left">
                                                    <div class="col-lg-1"></div>
                                                    <div class="col-lg-11" style="font-size:14px;">@item.MVTDate</div>
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="row">
                                                    <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                                </div>
                                            }
                                        </div>
                                </div>

                                @if (string.Compare(item.ProjectType, Prometheus.Models.ProjectTypeInf.QM) != 0)
                                {
                                    <div class="col-lg-2">
                                        <div class="col-lg-7" data-toggle="tooltip" title="Yield">
                                            <a href="/Project/ProjectYieldMain?ProjectKey=@item.ProjectKey"><img src="~/Content/images/PJ/Yield.png" style="height:100px; width:100px"></a>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="row">
                                                <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                            </div>

                                            @if (item.FirstYield > 0)
                                            {
                                                <div class="row"><span class="badge" style="color:white;background-color:red">FPY @((item.FirstYield * 100.0).ToString("0.0")) %</span></div>
                                            }
                                            else
                                            {
                                                <div class="row">
                                                    <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                                </div>
                                            }
                                            @if (item.RetestYield > 0)
                                            {
                                                <div class="row"><span class="badge" style="color:white;background-color:red">FY @((item.RetestYield * 100.0).ToString("0.0")) %</span></div>
                                            }
                                            else
                                            {
                                                <div class="row">
                                                    <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                                </div>
                                            }

                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="col-lg-7">
                                            <a href="/Project/ProjectFA?ProjectKey=@item.ProjectKey"><img src="~/Content/images/PJ/FA.png" style="height:100px; width:100px"></a>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="row">
                                                <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                                @if (item.FinishRating < 90)
                                                {
                                                    <div class="row"><span class="badge" style="color:white;background-color:red">@item.PendingFACount</span></div>
                                                }
                                                else
                                                {
                                                    <div class="row"><span class="badge" style="color:white;background-color:forestgreen">@item.PendingFACount</span></div>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="col-lg-7" data-toggle="tooltip" title="Task">
                                            <a href="/Project/ProjectIssues?ProjectKey=@item.ProjectKey"><img src="~/Content/images/PJ/Task.png" style="height:100px; width:100px"></a>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                            <div class="row"><span class="badge" style="color:white;background-color:red">@item.PendingTaskCount</span></div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="col-lg-7">
                                            <a href="/Project/ProjectRMAStatus?ProjectKey=@item.ProjectKey"><img src="~/Content/images/PJ/RMA.png" style="height:100px; width:100px"></a>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                            <div class="row"><span class="badge" style="color:white;background-color:red">@item.PendingRMACount</span></div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="col-lg-7"  data-toggle="tooltip" title="Debug Tree">
                                            <a href="/Project/ProjectError?ProjectKey=@item.ProjectKey"><img src="~/Content/images/PJ/DebugTreeicon.png" style="height:100px; width:100px"></a>
                                        </div>
                                        <div class="col-lg-5">
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class="col-lg-2">
                                        <div class="col-lg-7">
                                            <a href="/Project/ProjectIssues?ProjectKey=@item.ProjectKey"><img src="~/Content/images/PJ/Task.png" style="height:100px; width:100px"></a>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                            <div class="row"><span class="badge" style="color:white;background-color:red">@item.PendingTaskCount</span></div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="col-lg-7"  data-toggle="tooltip" title="OBA">
                                            <a href="/Project/ProjectOBA?ProjectKey=@item.ProjectKey"><img src="~/Content/images/PJ/Task.png" style="height:100px; width:100px"></a>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="col-lg-7" data-toggle="tooltip" title="Quality">
                                            <a href="/Project/ProjectQuality?ProjectKey=@item.ProjectKey"><img src="~/Content/images/PJ/Task.png" style="height:100px; width:100px"></a>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="col-lg-7" data-toggle="tooltip" title="Reliability">
                                            <a href="/Project/ProjectReliability?ProjectKey=@item.ProjectKey"><img src="~/Content/images/PJ/Task.png" style="height:100px; width:100px"></a>
                                        </div>
                                        <div class="col-lg-5">
                                            <div class="col-lg-12" style="font-size:14px;">&nbsp;</div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                    </div>
                                }

                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12">&nbsp;</div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">&nbsp;</div>
                        </div>

                        }
                        </div>
                    </div>
                </div>

            idx = idx + 1;
        }
    }
</div>


